-- TABLE T_LOPENR
DROP TABLE IF EXISTS T_LOPENR;

CREATE TABLE T_LOPENR
(
    LOPENR_ID      INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    SISTE_LOPENR   INTEGER,
    K_FIL_T        VARCHAR(20),
    K_ANVISER      VARCHAR(20),
    DATO_OPPRETTET TIMESTAMP(6) NOT NULL,
    OPPRETTET_AV   VARCHAR(20)  NOT NULL,
    DATO_ENDRET    TIMESTAMP(6) NOT NULL,
    ENDRET_AV      VARCHAR(20)  NOT NULL,
    VERSJON        INTEGER      NOT NULL
);

INSERT INTO T_LOPENR (LOPENR_ID, SISTE_LOPENR, K_FIL_T, K_ANVISER, DATO_OPPRETTET, OPPRETTET_AV, DATO_ENDRET, ENDRET_AV, VERSJON)
VALUES (1, 33, 'ANV', 'SPK', '2024-02-01 00:00:00.000000', 'Endre', '2024-04-03 11:33:33.260122', 'sokos-spk-mottak', 1);


-- TABLE T_INN_TRANSAKSJON
DROP TABLE IF EXISTS T_INN_TRANSAKSJON;

CREATE TABLE T_INN_TRANSAKSJON
(
    INN_TRANSAKSJON_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FIL_INFO_ID        INTEGER      NOT NULL,
    K_TRANSAKSJON_S    VARCHAR(20),
    FNR_FK             CHAR(11),
    BELOPSTYPE         VARCHAR(20),
    ART                VARCHAR(20),
    AVSENDER           VARCHAR(20),
    UTBETALES_TIL      CHAR(11),
    DATO_FOM_STR       VARCHAR(20),
    DATO_TOM_STR       VARCHAR(20),
    DATO_ANVISER_STR   VARCHAR(20),
    BELOP_STR          VARCHAR(20),
    REF_TRANS_ID       VARCHAR(20),
    TEKSTKODE          VARCHAR(20),
    RECTYPE            VARCHAR(20),
    TRANS_ID_FK        VARCHAR(20),
    DATO_FOM           DATE,
    DATO_TOM           DATE,
    DATO_ANVISER       DATE,
    BELOP              INTEGER,
    BEHANDLET          CHAR(1),
    DATO_OPPRETTET     TIMESTAMP(6) NOT NULL,
    OPPRETTET_AV       VARCHAR(20)  NOT NULL,
    DATO_ENDRET        TIMESTAMP(6) NOT NULL,
    ENDRET_AV          VARCHAR(20)  NOT NULL,
    VERSJON            INTEGER      NOT NULL,
    PRIORITET_STR      VARCHAR(20),
    TREKKANSVAR        VARCHAR(20),
    SALDO_STR          VARCHAR(20),
    KID                VARCHAR(26),
    PRIORITET          DATE,
    SALDO              INTEGER,
    GRAD               INTEGER,
    GRAD_STR           VARCHAR(4)
);

-- TABLE T_FIL_INFO
DROP TABLE IF EXISTS T_FIL_INFO;

CREATE TABLE T_FIL_INFO
(
    FIL_INFO_ID      INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    K_FIL_S          VARCHAR(20)  NOT NULL,
    K_ANVISER        VARCHAR(20),
    K_FIL_T          VARCHAR(20)  NOT NULL,
    K_FIL_TILSTAND_T VARCHAR(20),
    FIL_NAVN         VARCHAR(200),
    LOPENR           VARCHAR(20),
    FEILTEKST        VARCHAR(200),
    DATO_MOTTATT     DATE,
    DATO_SENDT       DATE,
    DATO_OPPRETTET   TIMESTAMP(6) NOT NULL,
    OPPRETTET_AV     VARCHAR(20)  NOT NULL,
    DATO_ENDRET      TIMESTAMP(6) NOT NULL,
    ENDRET_AV        VARCHAR(20)  NOT NULL,
    VERSJON          INTEGER      NOT NULL
);

-- TABLE T_PERSON
DROP TABLE IF EXISTS T_PERSON;

CREATE TABLE T_PERSON
(
    PERSON_ID      INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FNR_FK         CHAR(11)     not null,
    DATO_OPPRETTET TIMESTAMP(6) not null,
    OPPRETTET_AV   VARCHAR(20)  not null,
    DATO_ENDRET    TIMESTAMP(6) not null,
    ENDRET_AV      VARCHAR(20)  not null,
    VERSJON        INTEGER      not null
);

-- TABLE T_TRANS_TILSTAND

DROP TABLE IF EXISTS T_TRANS_TILSTAND;

CREATE TABLE T_TRANS_TILSTAND
(
    TRANS_TILSTAND_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TRANSAKSJON_ID    INTEGER,
    K_TRANS_TILST_T   VARCHAR(20),
    FEILKODE          VARCHAR(20),
    FEILKODEMELDING   VARCHAR(200),
    DATO_OPPRETTET    TIMESTAMP(6) not null,
    OPPRETTET_AV      VARCHAR(20)  not null,
    DATO_ENDRET       TIMESTAMP(6) not null,
    ENDRET_AV         VARCHAR(20)  not null,
    VERSJON           INTEGER      not null
);